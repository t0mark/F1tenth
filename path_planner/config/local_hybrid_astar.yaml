# Hybrid A* Local Planner configuration (Refactored)

local_planner:
  ros__parameters:
    node_executable: 'local_hybrid_astar_node'
    node_name: 'local_hybrid_astar_node'

    # Topics
    global_path_topic: '/global_path'
    scan_topic: '/scan'
    odom_topic: '/odom'
    output_topic: '/local_path'

    # Frames
    map_frame: 'map'
    base_frame: 'base_link'

    # 장애물 팽창 반경 (m) - LiDAR 장애물 주변으로 코스트 전파할 반경 (월드 좌표)
    inflation_radius: 0.5

    # Planner configuration
    # 목표점 거리 (m), 글로벌 경로에서 앞쪽 몇 m 지점을 목표로 삼을지
    lookahead_distance: 5.0
    # 플래너 실행 주기 (Hz)
    planner_hz: 50.0
    # A* 최대 반복 횟수 (늘리면 더 복잡한 경로 탐색 가능)
    max_iterations: 3000

    # Cost weights
    # 우선순위: 동적 장애물(LiDAR) >> 경로 추종 > 곡률/벽 > 조향 부드러움

    # 조향 변화 페널티 (부드러운 주행)
    steering_change_weight: 1.5
    # 동적 장애물 페널티 (LiDAR 기반) - 강하지만 경로 찾을 수 있게 조정
    obstacle_cost_weight: 30.0
    # 글로벌 경로 이탈 페널티 - 적당히 유지 (완전히 벗어나면 안됨)
    path_distance_weight: 2.5
    # 목표점 거리 가중치
    heuristic_weight: 1.0
    # 곡률 기반 휴리스틱 가중치 (바깥쪽 선호, 안쪽 페널티)
    curvature_heuristic_weight: 8.0
    # 벽 거리 기반 휴리스틱 가중치 (낮게 설정 - 조금 박아도 됨)
    wall_distance_heuristic_weight: 2.0
    # 동적 장애물 감지 임계값 (코스트가 이 값 이상이면 노드 차단)
    dynamic_obstacle_threshold: 0.6

    # Precomputed local graph
    local_graph_enabled: true
    use_local_graph_planner: true
    local_graph_prefix: 'local_graph'
    local_graph_dir: 'data'
    publish_local_graph_markers: true
    local_graph_marker_topic: '/local_graph_markers'
    local_graph_marker_scale: 0.06
    local_graph_edge_scale: 0.02
